{"version":3,"sources":["ion-preload-image.ts"],"names":[],"mappings":"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","file":"ion-preload-image.js","sourceRoot":"","sourcesContent":["import { Component, Input, ElementRef, Renderer, OnChanges, SimpleChange } from '@angular/core';\nimport { isPresent } from 'ionic-angular/util/util';\n\n/**\n * Generated class for the IonListCategoryComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n\nexport class IonPreloadImageComponent implements OnChanges {\n    _src: string = '';\n    _ratio: { w: number, h: number };\n    _img: any;\n\n    constructor(public _elementRef: ElementRef, public _renderer: Renderer) {\n        this._img = new Image();\n    }\n\n     alt: string;\n\n     title: string;\n\n     set src(val: string) {\n        this._src = isPresent(val) ? val : '';\n    }\n\n     set ratio(ratio: { w: number, h: number }) {\n        this._ratio = ratio || null;\n    }\n\n    ngOnChanges(changes: { [propName: string]: SimpleChange }) {\n        let ratio_height = (this._ratio.h / this._ratio.w * 100) + \"%\";\n        // Conserve aspect ratio (see: http://stackoverflow.com/a/10441480/1116959)\n        this._renderer.setElementStyle(this._elementRef.nativeElement, 'padding-bottom', ratio_height);\n\n        this._update();\n        // console.log(\"CHANGES preload-image\", this._src);\n        // console.log(changes['src'].isFirstChange());\n    }\n\n    _update() {\n        if (isPresent(this.alt)) {\n            this._img.alt = this.alt;\n        }\n        if (isPresent(this.title)) {\n            this._img.title = this.title;\n        }\n\n        this._img.addEventListener('load', () => {\n            this._elementRef.nativeElement.appendChild(this._img);\n            this._loaded(true);\n        });\n\n        this._img.src = this._src;\n\n        this._loaded(false);\n    }\n\n    _loaded(isLoaded: boolean) {\n        this._elementRef.nativeElement.classList[isLoaded ? 'add' : 'remove']('img-loaded');\n    }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'ion-preload-image',\n    template: `\n    <ion-spinner name=\"bubbles\"></ion-spinner>\n    <ng-content></ng-content>\n    `,\n    styles: [`\n    ion-preload-image{\n        position: relative;\n        width: 100%;\n          display: block;\n        overflow: hidden;\n      \n          &.rounded-image\n          {\n              border-radius: 50%;\n          }\n      \n        &.img-loaded\n        {\n          background-color: transparent;\n          border: none;\n      \n              img\n            {\n                  visibility: visible;\n                  opacity: 1;\n            }\n      \n              ion-spinner {\n                  visibility: hidden;\n                  display: none;\n              }\n        }\n      \n        img\n        {\n          position: absolute;\n              left: 0px;\n              top: 0px;\n              visibility: hidden;\n              opacity: 0;\n          width: 100% !important;\n          height: inherit !important;\n          max-width: inherit !important;\n          max-height: inherit !important;\n          min-width: inherit !important;\n          min-height: inherit !important;\n        }\n    }\n  `]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'alt': [{ type: Input },],\n'title': [{ type: Input },],\n'src': [{ type: Input },],\n'ratio': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}